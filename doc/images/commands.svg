<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="379px" preserveAspectRatio="none" style="width:476px;height:379px;background:#FFFFFF;" version="1.1" viewBox="0 0 476 379" width="476px" zoomAndPan="magnify"><defs><filter height="300%" id="fmos5m2zdlhm3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[80f29dbcbe2236220e59b204657d0953]
class IMutationCommand--><rect codeLine="1" fill="#FEFECE" filter="url(#fmos5m2zdlhm3)" height="81.5078" id="IMutationCommand" style="stroke:#A80036;stroke-width:1.5;" width="163" x="7" y="63.5"/><ellipse cx="31.9" cy="79.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M32.8531,76.1406 L32.8531,82.7969 L34.5719,82.7969 Q35.1813,82.7969 35.4469,83.0313 Q35.7125,83.2656 35.7125,83.6563 Q35.7125,84.0313 35.4469,84.2656 Q35.1813,84.5 34.5719,84.5 L29.4313,84.5 Q28.8219,84.5 28.5563,84.2656 Q28.2906,84.0313 28.2906,83.6406 Q28.2906,83.2656 28.5563,83.0313 Q28.8219,82.7969 29.4313,82.7969 L31.15,82.7969 L31.15,76.1406 L29.4313,76.1406 Q28.8219,76.1406 28.5563,75.9063 Q28.2906,75.6719 28.2906,75.2813 Q28.2906,74.9063 28.5563,74.6719 Q28.8219,74.4375 29.4313,74.4375 L34.5719,74.4375 Q35.1813,74.4375 35.4469,74.6719 Q35.7125,74.9063 35.7125,75.2813 Q35.7125,75.6719 35.4469,75.9063 Q35.1813,76.1406 34.5719,76.1406 L32.8531,76.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="109" x="48.1" y="84.4102">IMutationCommand</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="169" y1="95.5" y2="95.5"/><ellipse cx="18" cy="106.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="27" y="110.9189">start(study, ...args)</text><ellipse cx="18" cy="120.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133" x="27" y="124.7549">getInterviewItems(pageSet)</text><ellipse cx="18" cy="134.1719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="27" y="138.5908">apply(study, interviewItems)</text><!--MD5=[c95c50643b1d608b6afd49da8da5f992]
class MutableStudy--><rect codeLine="7" fill="#FEFECE" filter="url(#fmos5m2zdlhm3)" height="194.5469" id="MutableStudy" style="stroke:#A80036;stroke-width:1.5;" width="257" x="205" y="7"/><ellipse cx="292.75" cy="27.0938" fill="#FF69B4" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M295.5156,22.9688 Q295.6719,22.75 295.8594,22.6406 Q296.0469,22.5313 296.2656,22.5313 Q296.6406,22.5313 296.875,22.7969 Q297.1094,23.0469 297.1094,23.6563 L297.1094,25.1094 Q297.1094,25.7188 296.875,25.9844 Q296.6406,26.25 296.2656,26.25 Q295.9219,26.25 295.7188,26.0469 Q295.5156,25.8594 295.4063,25.3438 Q295.3594,24.9844 295.1719,24.7969 Q294.8438,24.4219 294.2344,24.2031 Q293.625,23.9844 293,23.9844 Q292.2344,23.9844 291.5938,24.3125 Q290.9688,24.6406 290.4688,25.3906 Q289.9844,26.1406 289.9844,27.1719 L289.9844,28.2656 Q289.9844,29.5 290.875,30.3281 Q291.7656,31.1406 293.3594,31.1406 Q294.2969,31.1406 294.9531,30.8906 Q295.3438,30.7344 295.7656,30.2969 Q296.0313,30.0313 296.1719,29.9531 Q296.3281,29.875 296.5313,29.875 Q296.8594,29.875 297.1094,30.1406 Q297.375,30.3906 297.375,30.7344 Q297.375,31.0781 297.0313,31.4844 Q296.5313,32.0625 295.7344,32.3906 Q294.6563,32.8438 293.3594,32.8438 Q291.8438,32.8438 290.6406,32.2188 Q289.6563,31.7188 288.9688,30.6563 Q288.2813,29.5781 288.2813,28.2969 L288.2813,27.1406 Q288.2813,25.8125 288.8906,24.6719 Q289.5156,23.5156 290.6094,22.9063 Q291.7031,22.2813 292.9375,22.2813 Q293.6719,22.2813 294.3125,22.4531 Q294.9688,22.6094 295.5156,22.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="327.25" y="24.457">«Proxy»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="73" x="313.25" y="39.5508">MutableStudy</text><line style="stroke:#A80036;stroke-width:1.5;" x1="206" x2="461" y1="47.1875" y2="47.1875"/><ellipse cx="216" cy="58.1875" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="225" y="62.6064">value</text><ellipse cx="216" cy="72.0234" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="225" y="76.4424">name</text><ellipse cx="216" cy="85.8594" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="46" x="225" y="90.2783">pageSets</text><ellipse cx="216" cy="99.6953" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="225" y="104.1143">pages</text><ellipse cx="216" cy="113.5313" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="25" x="225" y="117.9502">items</text><ellipse cx="216" cy="127.3672" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="52" x="225" y="131.7861">wotkflows</text><ellipse cx="216" cy="141.2031" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="225" y="145.6221">crossRules</text><line style="stroke:#A80036;stroke-width:1.5;" x1="206" x2="461" y1="152.0391" y2="152.0391"/><ellipse cx="216" cy="163.0391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="153" x="225" y="167.458">update(kwargs: Partial&lt;Study&gt;)</text><ellipse cx="216" cy="176.875" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="231" x="225" y="181.2939">updateItem(page, index, item: Partial&lt;PageItem&gt;)</text><ellipse cx="216" cy="190.7109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="175" x="225" y="195.1299">addItem(page, index, item: PageItem)</text><!--MD5=[42e051526855f1b58eca2ca2a9fbc8a1]
class UpdateItemCommand--><rect codeLine="20" fill="#FEFECE" filter="url(#fmos5m2zdlhm3)" height="103.3438" id="UpdateItemCommand" style="stroke:#A80036;stroke-width:1.5;" width="192" x="114.5" y="262"/><ellipse cx="146.15" cy="278" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M148.9156,273.875 Q149.0719,273.6563 149.2594,273.5469 Q149.4469,273.4375 149.6656,273.4375 Q150.0406,273.4375 150.275,273.7031 Q150.5094,273.9531 150.5094,274.5625 L150.5094,276.0156 Q150.5094,276.625 150.275,276.8906 Q150.0406,277.1563 149.6656,277.1563 Q149.3219,277.1563 149.1188,276.9531 Q148.9156,276.7656 148.8063,276.25 Q148.7594,275.8906 148.5719,275.7031 Q148.2438,275.3281 147.6344,275.1094 Q147.025,274.8906 146.4,274.8906 Q145.6344,274.8906 144.9938,275.2188 Q144.3688,275.5469 143.8688,276.2969 Q143.3844,277.0469 143.3844,278.0781 L143.3844,279.1719 Q143.3844,280.4063 144.275,281.2344 Q145.1656,282.0469 146.7594,282.0469 Q147.6969,282.0469 148.3531,281.7969 Q148.7438,281.6406 149.1656,281.2031 Q149.4313,280.9375 149.5719,280.8594 Q149.7281,280.7813 149.9313,280.7813 Q150.2594,280.7813 150.5094,281.0469 Q150.775,281.2969 150.775,281.6406 Q150.775,281.9844 150.4313,282.3906 Q149.9313,282.9688 149.1344,283.2969 Q148.0563,283.75 146.7594,283.75 Q145.2438,283.75 144.0406,283.125 Q143.0563,282.625 142.3688,281.5625 Q141.6813,280.4844 141.6813,279.2031 L141.6813,278.0469 Q141.6813,276.7188 142.2906,275.5781 Q142.9156,274.4219 144.0094,273.8125 Q145.1031,273.1875 146.3375,273.1875 Q147.0719,273.1875 147.7125,273.3594 Q148.3688,273.5156 148.9156,273.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="163.85" y="282.9102">UpdateItemCommand</text><line style="stroke:#A80036;stroke-width:1.5;" x1="115.5" x2="305.5" y1="294" y2="294"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="122.5" y="302"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="25" x="134.5" y="309.4189">parts</text><line style="stroke:#A80036;stroke-width:1.5;" x1="115.5" x2="305.5" y1="315.8359" y2="315.8359"/><ellipse cx="125.5" cy="326.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="134.5" y="331.2549">start(study, page, index)</text><ellipse cx="125.5" cy="340.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="166" x="134.5" y="345.0908">getInterviewItems(study, pageSet)</text><ellipse cx="125.5" cy="354.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="134.5" y="358.9268">apply(study, interviewItems)</text><!--MD5=[526fb8940bc2518812f4d2c15233ff0b]
reverse link IMutationCommand to UpdateItemCommand--><path codeLine="28" d="M122.54,163.25 C140.81,194.25 163.12,232.11 180.7,261.93 " fill="none" id="IMutationCommand-backto-UpdateItemCommand" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="116.44,166.69,112.31,145.9,128.5,159.58,116.44,166.69" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[82b4e66c256a6da8b27161ce4040d48e]
reverse link IMutationCommand to MutableStudy--><path codeLine="29" d="M175.44,104.5 C185.21,104.5 194.98,104.5 204.75,104.5 " fill="none" id="IMutationCommand-backto-MutableStudy" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="170.33,104.5,179.33,108.5,175.33,104.5,179.33,100.5,170.33,104.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6f8aeae9977117068735fc6fe61c7f8f]
reverse link MutableStudy to UpdateItemCommand--><path codeLine="30" d="M273.55,206.39 C262.12,225.63 250.61,244.99 240.62,261.81 " fill="none" id="MutableStudy-backto-UpdateItemCommand" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="276.14,202.03,268.1158,207.7407,273.5949,206.3338,275.0019,211.8129,276.14,202.03" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[59bf4423f70d196104a0c0aa5136eb2d]
@startuml commands
interface IMutationCommand {
  +start(study, ...args)
  +getInterviewItems(pageSet)
  +apply(study, interviewItems)
}

class MutableStudy <<(C, HotPink) Proxy>> {
  +value
  +name
  +pageSets
  +pages
  +items
  +wotkflows
  +crossRules
  +update(kwargs: Partial<Study>)
  +updateItem(page, index, item: Partial<PageItem>)
  +addItem(page, index, item: PageItem)
}

class UpdateItemCommand {
  -parts
  +start(study, page, index)
  +getInterviewItems(study, pageSet)
  +apply(study, interviewItems)
}


IMutationCommand <|.. UpdateItemCommand
IMutationCommand <. MutableStudy
MutableStudy <.. UpdateItemCommand
hide IMutationCommand fields
@enduml

PlantUML version 1.2021.8(Sat Jun 26 10:20:59 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>